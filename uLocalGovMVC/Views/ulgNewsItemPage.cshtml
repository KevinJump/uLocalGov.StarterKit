@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
	@using Eksponent.CropUp
@{
    Layout = "ulgDesign.cshtml";
}

@section MetaData {
	
	
}


	<div class="row">
		<div class="col-lg-3">
			<div class="well hidden-phone">
							@*rewrite as partial view *@
                @Umbraco.RenderMacro("ulg.sidenavigation")
		
			</div>
		</div>
		<div class="col-lg-6">
		
				<div class="page-header">
				<h1>@Umbraco.Field("title")</h1>
				</div>
					@* we should have a partial view which encapsulates all the logic to display a cropped image *@
					@{ 
					bool hasImage = false;
					string imageUrl= String.Empty;
						string imageAltText = String.Empty;
						
						
					}
					@if (Model.Content.HasProperty("relatedImage") && Model.Content.HasValue("relatedImage")){
						 var mediaItem = Umbraco.TypedMedia(Model.Content.GetPropertyValue("relatedImage")); 
       						hasImage = true;
       						imageUrl = mediaItem.GetPropertyValue<string>("umbracoFile");
      						imageAltText = mediaItem.GetPropertyValue<string>("alternativeText");
     
  
     				if (String.IsNullOrEmpty(imageAltText)){
      					imageAltText = mediaItem.Name;         
     				}
     				if (!mediaItem.GetPropertyValue<bool>("doNotCropThisImage")){
         				imageUrl = CropUp.GetUrl(imageUrl,new ImageSizeArguments{ CropAlias="newsarticle", CropMode=CropUpMode.BestFit });
     				}
 
    			}   
@if (hasImage){
					<div class="pull-left"><img src="@imageUrl" alt="@imageAltText" /></div>
						}		
					@Umbraco.Field("bodyText")
				
	
		</div>
		<div class="col-lg-3">
			@Html.Partial("ulgRelatedLinks")

            @Html.Partial("ulgContactLinks")  			
		</div>
	</div>


	
			@section Footer {
				
				
			}
@section Scripts {
	
}